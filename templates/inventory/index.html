{% extends "base.html" %} {% from "macros.jinja" import window_vars with context
%} {% block page %}
<div class="row q-col-gutter-md">
  <div class="col-12 col-md-8 col-lg-7 q-gutter-y-md">
    <q-card>
      <q-card-section>
        <q-btn unelevated color="primary" @click="showInventoryDialog"
          >New Inventory</q-btn
        >
      </q-card-section>
    </q-card>
    <q-card v-if="inventories.length">
      <q-list>
        <template v-for="(inventory, index) in inventories" :key="inventory.id">
          <q-expansion-item
            expand-icon-toggle
            expand-separator
            icon="inventory"
            :label="inventory.name"
            :caption="inventory.currency"
            header-class="q-py-md"
          >
            <q-card>
              <q-card-section>
                <q-table
                  flat
                  bordered
                  title="Treats"
                  :rows="rows"
                  :columns="columns"
                  row-key="id"
                  :filter="filter"
                  :loading="loading"
                >
                  <template v-slot:top>
                    <q-btn
                      color="primary"
                      :disable="loading"
                      label="Add row"
                      @click="addRow"
                    />
                    <q-btn
                      v-if="rows.length !== 0"
                      class="q-ml-sm"
                      color="primary"
                      :disable="loading"
                      label="Remove row"
                      @click="removeRow"
                    />
                    <q-space />
                    <q-input
                      borderless
                      dense
                      debounce="300"
                      color="primary"
                      v-model="filter"
                    >
                      <template v-slot:append>
                        <q-icon name="search" />
                      </template>
                    </q-input>
                  </template>
                </q-table>
              </q-card-section>
            </q-card>
          </q-expansion-item>
          <q-separator v-if="index < inventories.length -1"></q-separator>
        </template>
      </q-list>
    </q-card>
  </div>
  <div class="col-12 col-md-4 col-lg-5 q-gutter-y-md">
    <q-card>
      <q-card-section>
        <h6 class="text-subtitle1 q-my-none">
          {{SITE_TITLE}} Inventory extension
        </h6>
      </q-card-section>
    </q-card>
  </div>
  {% include "inventory/_dialogs.html" %}
</div>
{% endblock %} {% block scripts %} {{ window_vars(user) }}
<script src="{{ static_url_for('inventory/static', path='js/index.js') }}"></script>
{% endblock %}
